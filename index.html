<!--
             _.-~-.
           7''  Q..\
        _7         (_
      _7  _/    _q.  /
    _7 . ___  /VVvv-'_                                            .
   7/ / /~- \_\\      '-._     .-'                      /       //
  ./ ( /-~-/||'=.__  '::. '-~'' {             ___   /  //     ./{
 V   V-~-~| ||   __''_   ':::.   ''~-~.___.-'' _/  // / {_   /  {  /
  VV/-~-~-|/ \ .'__'. '.    '::                     _ _ _        ''.
  / /~~~~||VVV/ /  \ )  \        _ __ ___   ___ ___(_) | | __ _   .::'
 / (~-~-~\\.-' /    \'   \::::. | '_ ` _ \ / _ \_  / | | |/ _` | :::'
/..\    /..\__/      '     '::: | | | | | | (_) / /| | | | (_| | ::'
vVVv    vVVv                 ': |_| |_| |_|\___/___|_|_|_|\__,_| ''

This is the custom Mozilla Login Experience, designed and built by Mozilla's IAM Project.

Version: 1.4.4
Changelog: https://github.com/mozilla-iam/auth0-custom-lock/blob/master/CHANGELOG.md

These are the variables we are using:

  Auth0-domain: auth-dev.mozilla.auth0.com
  Client ID: CIynn5wTPyYZQcA1FJx1Io9z4t7QWDaE
  LDAP connection name: Mozilla-LDAP-Dev
  Person API domain: https://person-api.sso.allizom.org/v1/connection/
  Google Tag Manager ID: GTM-T2N2BRW
  Logout URL: https://auth-dev.mozilla.auth0.com/v2/logout?returnTo=https://sso.allizom.org/signout.html
  SSO Dashboard URL: http://sso.allizom.org
  CSP: default-src 'none'; connect-src 'self' https://person-api.sso.allizom.org; script-src 'self' https://mozilla-iam.github.io https://www.googletagmanager.com https://www.google-analytics.com; style-src 'self' 'unsafe-inline' https://mozilla-iam.github.io; font-src 'self' https://mozilla-iam.github.io; img-src 'self' https://mozilla-iam.github.io https://www.google-analytics.com
  CDN: https://mozilla-iam.github.io/auth0-custom-lock
  Features:
   autologin: true
   person_api_lookup: true
   supportedLoginMethods: github,google-oauth2,firefoxaccounts,email

The code is the result of a build process, please find the source code
on GitHub: https://github.com/mozilla-iam/auth0-custom-lock
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Mozilla Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; connect-src 'self' https://person-api.sso.allizom.org; script-src 'self' https://mozilla-iam.github.io https://www.googletagmanager.com https://www.google-analytics.com; style-src 'self' 'unsafe-inline' https://mozilla-iam.github.io; font-src 'self' https://mozilla-iam.github.io; img-src 'self' https://mozilla-iam.github.io https://www.google-analytics.com">
    <link rel="dns-prefetch" href="https://person-api.sso.allizom.org/v1/connection/">
    <link rel="stylesheet" href="https://mozilla-iam.github.io/auth0-custom-lock/css/fonts.css" type="text/css" />
    <link rel="stylesheet" href="https://mozilla-iam.github.io/auth0-custom-lock/css/styles.css" type="text/css" />
    <link rel="icon" href="https://mozilla-iam.github.io/auth0-custom-lock/images/favicon.png" type="image/png" sizes="196x196" />
  </head> 
  <body data-decorator="load-ga display-rp-name prevent-clickjack">
    <!--
    <div class="banner">
      <p></p>
    </div>
    -->
    <div class="card">
      <a href="https://mozilla.org" class="logo" target="_blank"><img alt="Mozilla" src="https://mozilla-iam.github.io/auth0-custom-lock/images/mozilla.svg" /></a>
      <noscript><p>This login form requires JavaScript to work, please enable it to log in.</p></noscript>
      <form data-decorator="init-auth handle-submit" method="post" action="/" lock-state="initial">
        <fieldset data-decorator="decide-screen">
          <legend class="rp-name"><span class="visually-hidden">Log in to </span><span id="rp-name-placeholder" class="rp-name__text"></span></legend>
          <div id="loading" class="loading" data-screen data-hidden aria-hidden="true" inert>
            <p class="visually-hidden">Loadingâ€¦</p>
            <img src="https://mozilla-iam.github.io/auth0-custom-lock/images/loading.svg" class="loading__spinner" />
            <p role="alert" id="loading__status" class="loading__status"></p>
          </div>
          <div id="initial" data-screen data-hidden aria-hidden="true">
            <div class="form__input">
              <input type="email" name="username" id="field-email" autocomplete="username email" autofocus data-decorator="watch-contents" />
              <label for="field-email"><span><span aria-hidden="true">Log in with </span>email</span></label>
            </div>
            <input type="submit" class="button button--full-width" id="enter-initial" value="Enter" />
            <hr>
            <ul class="login-options list list--plain">
              <li data-optional-login-method="firefoxaccounts">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-firefoxaccounts">
                  <img  class="icon" src="https://mozilla-iam.github.io/auth0-custom-lock/images/firefox.svg">
                  <span>Log in with Firefox</span>
                </button>
              </li>
              <li data-optional-login-method="github">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-github">
                  <img class="icon" src="https://mozilla-iam.github.io/auth0-custom-lock/images/github.svg">
                  <span>Log in with GitHub</span>
                </button>
              </li>
              <li data-optional-login-method="google-oauth2">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-google">
                  <img  class="icon" src="https://mozilla-iam.github.io/auth0-custom-lock/images/google.svg">
                  <span>Log in with Google</span>
                </button>
            </ul>
            <div data-decorator="hide-autologin-setting-conditionally">
              <hr>
              <div class="setting">
                <a href="#what-is-autologin" class="link-to-tooltip" data-decorator="tooltip"><span class="visually-hidden">What is Auto-login?</span> <img class="icon" src="https://mozilla-iam.github.io/auth0-custom-lock/images/info.svg"></a>
                <input type="checkbox" id="use-autologin" data-decorator="set-autologin-preference" checked>
                <label for="use-autologin"><span class="setting__toggle"></span> <span class="setting__enabled-text">Auto-login is enabled</span><span class="setting__disabled-text">Auto-login is disabled</span></label>
                <div id="what-is-autologin" class="tooltip">
                  <p>Auto-login will allow you to bypass this screen in the future and be automatically logged in via your chosen login method. This setting can soon be edited by visiting your user menu on the SSO Dashboard.</p>
                </div>
              </div>
            </div>
          </div>
          <div id="ldap" data-screen data-hidden aria-hidden="true" inert>
            <div class="form__input">
              <input type="password" id="field-password" autocomplete="current-password" name="password" data-decorator="submit-with-enter watch-contents" data-continue-with="authorise-ldap-credentials"  />
              <label for="field-password"><span>LDAP password</span></label>
            </div>
            <input type="submit" class="button button--full-width" id="authorise-ldap-credentials" value="Enter"/>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="non-ldap" data-screen data-hidden aria-hidden="true" inert>
            <ul class="login-options list list--plain" data-optional-login-method="email">
              <li>
                <button class="button button--full-width button--secondary" type="button" data-handler="send-passwordless-link">Send me an email</button>
              </li>
            </ul>
            <a href="https://wiki.mozilla.org/IAM/Frequently_asked_questions#Q:_Why_do_you_support_email_login_.28.22passwordless.22.29_if_it.27s_less_safe_than_other_methods.3F" class="button button--text-only button--unpadded" target="_blank">Why an email?</a>
            <hr>
            <ul class="login-options list list--plain">
              <li data-optional-login-method="firefoxaccounts">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-firefoxaccounts">
                  <img  class="icon" src="https://mozilla-iam.github.io/auth0-custom-lock/images/firefox.svg">
                  <span>Log in with Firefox</span>
                </button>
              </li>
              <li data-optional-login-method="github">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-github">
                  <img class="icon" src="https://mozilla-iam.github.io/auth0-custom-lock/images/github.svg">
                  <span>Log in with GitHub</span>
                </button>
              </li>
              <li data-optional-login-method="google-oauth2">
                <button class="button button--full-width button--social button--secondary" type="button" data-handler="authorise-google">
                  <img  class="icon" src="https://mozilla-iam.github.io/auth0-custom-lock/images/google.svg">
                  <span>Log in with Google</span>
                </button>
            </ul>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="passwordless-success" data-screen data-hidden aria-hidden="true" inert>
            <h2 class="card__heading card__heading--success"><img src="https://mozilla-iam.github.io/auth0-custom-lock/images/envelope.svg" class="card__heading-icon" /> <span>Success</span></h2>
            <p>Email sent to <span id="passwordless-success-email-address"></span>, your login link will expire in 15 minutes.</p>
            <hr>
            <button id="back" type="button" class="button button--text-only card__back  button--unpadded" data-handler="go-to-initial-page">Need to send that to a different email?</button>
          </div>
          <div id="error-password" data-screen data-hidden aria-hidden="true" inert>
            <h2 class="card__heading card__heading--error" id="error-message-ldap"><img src="https://mozilla-iam.github.io/auth0-custom-lock/images/circled-x.svg" class="card__heading-icon" /> <span>Error</span></h2>
            <p>Please attempt again or contact the Help Desk for assistance.</p>
            <div class="form__input">
              <input type="password" id="field-password-try-2" autocomplete="current-password" name="password" data-decorator="submit-with-enter watch-contents" data-continue-with="authorise-ldap-credentials"  />
              <label for="field-password-try-2"><span>LDAP password</span></label>
            </div>
            <input type="submit" class="button button--full-width" id="authorise-ldap-credentials-try-2" value="Enter" />
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="error-passwordless" data-screen data-hidden aria-hidden="true" inert>
            <h2 class="card__heading card__heading--error" id="error-message-passwordless"><img src="https://mozilla-iam.github.io/auth0-custom-lock/images/circled-x.svg" class="card__heading-icon" /> <span>Error</span></h2>
            <p>We cannot send an email to this address</p>
            <button type="button" class="button button--text-only card__back  button--unpadded" data-handler="go-to-initial-page">Try again</button>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="ldap-not-available" data-screen data-hidden aria-hidden="true" inert>
            <h2 class="card__heading card__heading--error"><img src="https://mozilla-iam.github.io/auth0-custom-lock/images/circled-x.svg" class="card__heading-icon" /> <span>Error</span></h2>
            <p>Unfortunately, this website does not offer login with Mozilla LDAP.</p>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="ldap-required" data-screen data-hidden aria-hidden="true" inert>
            <h2 class="card__heading card__heading--error"><img src="https://mozilla-iam.github.io/auth0-custom-lock/images/circled-x.svg" class="card__heading-icon" /> <span>Error</span></h2>
            <p>Unfortunately, you can only login to this website using Mozilla LDAP.</p>
            <hr>
            <button type="button" class="button button--text-only card__back button--unpadded" data-handler="go-to-initial-page">Need to log in with a different account?</button>
          </div>
          <div id="autologin-settings" data-screen data-hidden aria-hidden="true" inert>
            <h2 class="card__heading card__heading--iconless">Auto-login settings</h2>
            <p data-decorator="fill-in-session-info">You are currently logged in<span data-email hidden> as <strong></strong></span><span data-login-method hidden> using <strong></strong></span>.</p>
            <div class="setting">
              <input type="checkbox" id="use-autologin-2" data-decorator="set-autologin-preference" checked>
              <label for="use-autologin-2"><span class="setting__toggle"></span> <span class="setting__enabled-text">Auto-login is enabled</span><span class="setting__disabled-text">Auto-login is disabled</span></label>
            </div>
            <hr>
            <ul class="login-options list list--plain">
              <li><a href="http://sso.allizom.org" class="button button--full-width button--secondary">Back to Dashboard</a></li>
              <li><a href="http://sso.allizom.org/logout" class="button button--full-width button--secondary">Log out of Mozilla</a></li>
            </ul>
          </div>
        </fieldset>
      </form>
      <ul class="legal-links list list--plain">
        <li><a href="https://www.mozilla.org/en-US/about/legal/" target="_blank">Legal</a></li>
        <li><a href="https://www.mozilla.org/en-US/privacy/websites/" target="_blank">Privacy</a></li>
        <li><a href="https://discourse.mozilla.org/c/iam" target="_blank">Need help?</a></li>
      </ul>
    </div>
    <script type="text/json" id="nlx-config">
    {
      "hostedConfig": "@@config@@",
      "environment": "DEV",
      "domain": "auth-dev.mozilla.auth0.com",
      "client_ID": "CIynn5wTPyYZQcA1FJx1Io9z4t7QWDaE",
      "LDAP_connection_name": "Mozilla-LDAP-Dev",
      "person_api_domain": "https://person-api.sso.allizom.org/v1/connection/",
      "GTM_ID": "GTM-T2N2BRW",
      "features" : {
        "autologin": "true",
        "person_api_lookup": "true"
      },
      "supportedLoginMethods": "github,google-oauth2,firefoxaccounts,email",
      "logout_url": "https://auth-dev.mozilla.auth0.com/v2/logout?returnTo=https://sso.allizom.org/signout.html"
   }</script>
    <script src="https://mozilla-iam.github.io/auth0-custom-lock/js/main.js"></script>
  </body>
</html>
